<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TAIWAN TOUR BY CAREKARE 2026</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Prompt:wght@300;400;600;800&display=swap" rel="stylesheet">

    <!-- Configuration & Styles -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Prompt"', 'sans-serif'],
                        cartoon: ['"Fredoka"', '"Prompt"', 'sans-serif'],
                    },
                    colors: {
                        'toy-blue': '#1F4788',  
                        'toy-yellow': '#F9D615', 
                        'toy-red': '#E81F26',    
                        'buzz-green': '#87D336', 
                        'buzz-purple': '#714798', 
                        'sky-blue': '#87CEEB',   
                        'cloud-white': '#FFFFFF',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #87CEEB;
            color: #1F2937;
            font-family: 'Prompt', sans-serif;
            /* Andy's Room Wallpaper - Static */
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='600' height='600' viewBox='0 0 600 600'%3E%3Cg fill='%23FFFFFF' opacity='0.4'%3E%3Cpath d='M49.3,55.8c-0.2-1.3-0.4-2.6-0.4-3.9c0-11.8,9.6-21.4,21.4-21.4c6.6,0,12.5,3,16.4,7.7c4.6-9.1,14.1-15.3,25-15.3c15.3,0,27.8,12.5,27.8,27.8c0,1.3-0.1,2.5-0.3,3.8c7.4,2.9,12.6,10.1,12.6,18.5c0,10.9-8.8,19.7-19.7,19.7H66.2c-9.3,0-16.9-7.6-16.9-16.9C49.3,62.8,49.3,55.8,49.3,55.8z' transform='translate(50, 50) scale(0.8)'/%3E%3Cpath d='M49.3,55.8c-0.2-1.3-0.4-2.6-0.4-3.9c0-11.8,9.6-21.4,21.4-21.4c6.6,0,12.5,3,16.4,7.7c4.6-9.1,14.1-15.3,25-15.3c15.3,0,27.8,12.5,27.8,27.8c0,1.3-0.1,2.5-0.3,3.8c7.4,2.9,12.6,10.1,12.6,18.5c0,10.9-8.8,19.7-19.7,19.7H66.2c-9.3,0-16.9-7.6-16.9-16.9C49.3,62.8,49.3,55.8,49.3,55.8z' transform='translate(350, 120) scale(1.1)'/%3E%3Cpath d='M49.3,55.8c-0.2-1.3-0.4-2.6-0.4-3.9c0-11.8,9.6-21.4,21.4-21.4c6.6,0,12.5,3,16.4,7.7c4.6-9.1,14.1-15.3,25-15.3c15.3,0,27.8,12.5,27.8,27.8c0,1.3-0.1,2.5-0.3,3.8c7.4,2.9,12.6,10.1,12.6,18.5c0,10.9-8.8,19.7-19.7,19.7H66.2c-9.3,0-16.9-7.6-16.9-16.9C49.3,62.8,49.3,55.8,49.3,55.8z' transform='translate(150, 300) scale(0.6)'/%3E%3Cpath d='M49.3,55.8c-0.2-1.3-0.4-2.6-0.4-3.9c0-11.8,9.6-21.4,21.4-21.4c6.6,0,12.5,3,16.4,7.7c4.6-9.1,14.1-15.3,25-15.3c15.3,0,27.8,12.5,27.8,27.8c0,1.3-0.1,2.5-0.3,3.8c7.4,2.9,12.6,10.1,12.6,18.5c0,10.9-8.8,19.7-19.7,19.7H66.2c-9.3,0-16.9-7.6-16.9-16.9C49.3,62.8,49.3,55.8,49.3,55.8z' transform='translate(450, 380) scale(0.9)'/%3E%3Cpath d='M49.3,55.8c-0.2-1.3-0.4-2.6-0.4-3.9c0-11.8,9.6-21.4,21.4-21.4c6.6,0,12.5,3,16.4,7.7c4.6-9.1,14.1-15.3,25-15.3c15.3,0,27.8,12.5,27.8,27.8c0,1.3-0.1,2.5-0.3,3.8c7.4,2.9,12.6,10.1,12.6,18.5c0,10.9-8.8,19.7-19.7,19.7H66.2c-9.3,0-16.9-7.6-16.9-16.9C49.3,62.8,49.3,55.8,49.3,55.8z' transform='translate(50, 500) scale(0.7)'/%3E%3C/g%3E%3C/svg%3E");
            background-size: 600px 600px;
            background-repeat: repeat;
            background-attachment: fixed;
        }

        /* --- Header Specific Animations --- */
        .header-bg-animate {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='200' viewBox='0 0 400 200'%3E%3Cpath fill='%23FFFFFF' opacity='0.2' d='M49.3,55.8c-0.2-1.3-0.4-2.6-0.4-3.9c0-11.8,9.6-21.4,21.4-21.4c6.6,0,12.5,3,16.4,7.7c4.6-9.1,14.1-15.3,25-15.3c15.3,0,27.8,12.5,27.8,27.8c0,1.3-0.1,2.5-0.3,3.8c7.4,2.9,12.6,10.1,12.6,18.5c0,10.9-8.8,19.7-19.7,19.7H66.2c-9.3,0-16.9-7.6-16.9-16.9C49.3,62.8,49.3,55.8,49.3,55.8z'/%3E%3C/svg%3E");
            background-repeat: repeat-x;
            background-size: 200px 100px;
            animation: cloudMove 20s linear infinite;
        }

        @keyframes cloudMove {
            from { background-position: 0 0; }
            to { background-position: 400px 0; }
        }

        .carekare-badge {
            background: linear-gradient(to right, #E81F26, #c41219);
            color: white;
            border-radius: 50px;
            border: 2px solid white;
            box-shadow: 0 3px 5px rgba(0,0,0,0.2);
            font-family: 'Prompt', sans-serif;
            font-weight: 700;
            transform: rotate(-2deg);
            z-index: 10;
            position: relative;
        }

        .toy-card {
            background: white;
            border-radius: 20px;
            border-bottom: 8px solid #cbd5e1;
            transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .toy-card:hover { transform: translateY(-5px) scale(1.02); border-bottom-width: 12px; }

        .tab-btn {
            width: 100%;
            font-family: 'Fredoka', 'Prompt', sans-serif;
            letter-spacing: 0.5px;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }
        
        .tab-active {
            background-color: #1F4788;
            color: #F9D615;
            border: 4px solid #F9D615;
            box-shadow: 0 6px 0 #0f264a;
            transform: translateY(-4px);
            z-index: 10;
        }
        
        .tab-inactive {
            background-color: white;
            color: #1F4788;
            border: 3px solid #1F4788;
            box-shadow: 0 4px 0 #cbd5e1;
        }
        .tab-inactive:active { transform: translateY(4px); box-shadow: 0 0 0 transparent; }

        .float-anim { animation: float 6s ease-in-out infinite; }
        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
            100% { transform: translateY(0px) rotate(0deg); }
        }

        .music-pulse { animation: musicPulse 2s infinite; }
        @keyframes musicPulse { 0% { box-shadow: 0 0 0 0 rgba(232, 31, 38, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(232, 31, 38, 0); } 100% { box-shadow: 0 0 0 0 rgba(232, 31, 38, 0); } }
    </style>
</head>
<body class="antialiased pb-32 relative overflow-x-hidden">

    <!-- HERO SECTION (REDESIGNED) -->
    <header class="bg-gradient-to-b from-sky-400 to-sky-300 shadow-2xl sticky top-0 z-50 border-b-[8px] border-toy-yellow rounded-b-[3rem] relative overflow-hidden h-auto min-h-[140px] md:min-h-[160px] flex items-center">
        <!-- Animated Background Elements -->
        <div class="absolute inset-0 header-bg-animate opacity-50 pointer-events-none"></div>
        <div class="absolute top-4 right-10 text-4xl animate-pulse opacity-60">‚ú®</div>
        <div class="absolute bottom-4 left-20 text-2xl animate-pulse opacity-40" style="animation-delay: 1s;">‚≠êÔ∏è</div>
        <div class="absolute -bottom-6 right-1/4 text-6xl float-anim opacity-20 transform rotate-12">‚òÅÔ∏è</div>

        <div class="max-w-5xl mx-auto px-6 py-4 w-full flex flex-row justify-between items-center relative z-10 gap-4">
            
            <!-- LOGO SECTION -->
            <div class="flex-shrink-0 transform hover:scale-105 transition duration-300">
                <img src="https://res.cloudinary.com/dbeuu3lmv/image/upload/v1768744718/LOGO1_u8zacw.png" 
                     alt="TAIWAN TOUR LOGO" 
                     class="h-24 md:h-32 w-auto object-contain drop-shadow-xl filter brightness-110">
                <div class="carekare-badge text-[10px] md:text-xs tracking-widest uppercase px-3 py-1 -mt-3 ml-2 shadow-lg inline-block rotate-3">
                    By CareKare 2026
                </div>
            </div>
            
            <!-- ACTION BUTTON -->
            <button onclick="scrollToSection('itinerary')" class="bg-buzz-green text-white border-b-4 border-green-700 px-5 py-3 md:px-8 md:py-4 rounded-full text-base md:text-xl font-bold shadow-2xl active:border-b-0 active:translate-y-1 transition-all flex items-center gap-2 hover:bg-green-500 hover:rotate-2 transform">
                <span>üöÄ</span> <span class="hidden md:inline">‡∏î‡∏π‡πÅ‡∏ú‡∏ô‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡πÄ‡∏•‡∏¢!</span><span class="md:hidden">‡πÅ‡∏ú‡∏ô‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß</span>
            </button>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 space-y-8 pt-8">

        <!-- INTRO -->
        <section class="bg-white rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 shadow-2xl border-4 border-white ring-4 md:ring-8 ring-sky-300 relative text-center transform rotate-1 hover:rotate-0 transition duration-500">
            <div class="absolute -top-6 -left-6 text-5xl transform -rotate-12 drop-shadow-lg float-anim">‚òÅÔ∏è</div>
            <div class="absolute -bottom-6 -right-6 text-5xl transform rotate-12 drop-shadow-lg float-anim" style="animation-delay: 0.5s;">üé≤</div>
            <h2 class="text-3xl md:text-5xl font-cartoon font-bold text-toy-blue mb-2 md:mb-4 drop-shadow-sm">üëã Taiwan adventure!</h2>
            <p class="text-gray-600 font-medium text-lg md:text-2xl">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏™‡∏π‡πà‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏û‡∏¥‡∏ä‡∏¥‡∏ï‡πÑ‡∏ï‡πâ‡∏´‡∏ß‡∏±‡∏ô 5 ‡∏ß‡∏±‡∏ô<br>‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏° ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏•‡∏∏‡∏¢‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢!</p>
        </section>

        <!-- COUNTDOWN & UTILITY CONTAINER -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            
            <!-- COUNTDOWN SECTION -->
            <section id="countdown-section" class="bg-white/95 backdrop-blur rounded-[2rem] p-6 shadow-xl border-4 border-dashed border-toy-yellow relative text-center">
                <div class="absolute -top-4 left-1/2 -translate-x-1/2 bg-toy-red text-white px-6 py-1 rounded-full font-bold shadow-md border-2 border-white text-sm tracking-wider uppercase whitespace-nowrap font-sans transform rotate-1">
                    üöÄ Mission Countdown
                </div>
                
                <h3 class="mt-4 text-lg font-bold text-toy-blue mb-4">‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏™‡∏π‡πà‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á</h3>

                <div class="flex flex-wrap justify-center gap-3" id="countdown-timer">
                    <div class="flex flex-col items-center p-2 bg-sky-50 rounded-xl border-2 border-sky-100 min-w-[60px]">
                        <span class="text-2xl font-bold text-toy-blue" id="cd-days">00</span>
                        <span class="text-[10px] font-bold text-gray-400 uppercase">Days</span>
                    </div>
                    <div class="flex flex-col items-center p-2 bg-yellow-50 rounded-xl border-2 border-yellow-100 min-w-[60px]">
                        <span class="text-2xl font-bold text-yellow-600" id="cd-hours">00</span>
                        <span class="text-[10px] font-bold text-gray-400 uppercase">Hrs</span>
                    </div>
                    <div class="flex flex-col items-center p-2 bg-green-50 rounded-xl border-2 border-green-100 min-w-[60px]">
                        <span class="text-2xl font-bold text-green-600" id="cd-minutes">00</span>
                        <span class="text-[10px] font-bold text-gray-400 uppercase">Mins</span>
                    </div>
                    <div class="flex flex-col items-center p-2 bg-purple-50 rounded-xl border-2 border-purple-100 min-w-[60px]">
                        <span class="text-2xl font-bold text-purple-600" id="cd-seconds">00</span>
                        <span class="text-[10px] font-bold text-gray-400 uppercase">Secs</span>
                    </div>
                </div>
                
                <p class="mt-4 text-xs font-bold text-gray-500 bg-gray-100 inline-block px-3 py-1 rounded-full">
                    üìç ‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡∏ï‡∏µ 5 ‡∏ó‡∏µ‡πà‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô‡∏™‡∏∏‡∏ß‡∏£‡∏£‡∏ì‡∏†‡∏π‡∏°‡∏¥
                </p>
            </section>

            <!-- UTILITY SECTION -->
            <div class="space-y-4">
                <!-- Weather -->
                <div class="bg-sky-100 border-l-[6px] border-toy-blue p-4 rounded-2xl flex items-center justify-between shadow-md relative overflow-hidden group">
                    <div class="relative z-10">
                        <div class="flex items-center gap-2 mb-1">
                            <span class="text-xl">üå§Ô∏è</span>
                            <span class="font-bold text-toy-blue text-sm">Andy's Weather</span>
                        </div>
                        <span id="weather-temp" class="text-3xl font-bold text-toy-blue">--¬∞C</span>
                    </div>
                    <div class="text-5xl transform group-hover:scale-110 transition duration-300" id="weather-icon">‚òÅÔ∏è</div>
                </div>

                <!-- Rate -->
                <div class="bg-pink-100 border-l-[6px] border-pink-400 p-4 rounded-2xl shadow-md relative overflow-hidden">
                    <div class="flex items-center gap-2 mb-2">
                        <span class="text-xl">üê∑</span>
                        <span class="font-bold text-pink-700 text-sm">Hamm's Rate</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <input type="number" id="amount-one" class="w-full rounded-lg border-2 border-pink-300 p-2 text-sm font-bold text-center text-gray-700 focus:outline-none" value="1" oninput="calculate()">
                        <span class="text-pink-400 font-bold">=</span>
                        <input type="number" id="amount-two" class="w-full rounded-lg border-2 border-pink-300 p-2 text-sm font-bold text-center text-gray-700 bg-white" value="1" readonly>
                        <select id="currency-two" class="rounded-lg border-2 border-pink-300 bg-white p-2 text-sm font-bold text-pink-700 focus:outline-none hidden" onchange="calculate()">
                            <option value="THB" selected>THB</option>
                        </select>
                        <span class="text-xs font-bold text-pink-500">THB</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ITINERARY SECTION -->
        <section id="itinerary" class="space-y-6">
            <div class="flex items-center gap-3 justify-center md:justify-start">
                <div class="bg-toy-red text-white p-3 rounded-xl shadow-lg font-bold text-2xl rotate-3 transform hover:rotate-12 transition">üìÖ</div>
                <h2 class="text-3xl font-cartoon font-bold text-toy-blue text-shadow-sm">
                    ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á
                </h2>
            </div>

            <!-- Day Tabs (GRID LAYOUT) -->
            <div class="bg-white/80 backdrop-blur-sm p-4 rounded-3xl shadow-lg border-2 border-white">
                <div class="grid grid-cols-3 sm:flex sm:justify-between gap-3 md:gap-4">
                    <button id="btn-day1" onclick="switchDay(1)" class="tab-btn tab-active px-2 py-3 md:px-6 md:py-4 rounded-xl text-base md:text-xl font-bold">
                        <span class="block text-[10px] md:text-xs opacity-80 mb-1 font-sans">START</span>
                        Day 1
                    </button>
                    <button id="btn-day2" onclick="switchDay(2)" class="tab-btn tab-inactive px-2 py-3 md:px-6 md:py-4 rounded-xl text-base md:text-xl font-bold">
                        <span class="block text-[10px] md:text-xs opacity-60 mb-1 font-sans">OUTSKIRT</span>
                        Day 2
                    </button>
                    <button id="btn-day3" onclick="switchDay(3)" class="tab-btn tab-inactive px-2 py-3 md:px-6 md:py-4 rounded-xl text-base md:text-xl font-bold">
                        <span class="block text-[10px] md:text-xs opacity-60 mb-1 font-sans">TRIP</span>
                        Day 3
                    </button>
                    <button id="btn-day4" onclick="switchDay(4)" class="tab-btn tab-inactive px-2 py-3 md:px-6 md:py-4 rounded-xl text-base md:text-xl font-bold">
                        <span class="block text-[10px] md:text-xs opacity-60 mb-1 font-sans">RELAX</span>
                        Day 4
                    </button>
                    <button id="btn-day5" onclick="switchDay(5)" class="tab-btn tab-inactive px-2 py-3 md:px-6 md:py-4 rounded-xl text-base md:text-xl font-bold">
                        <span class="block text-[10px] md:text-xs opacity-60 mb-1 font-sans">BACK</span>
                        Day 5
                    </button>
                </div>
                <p class="text-center text-[10px] md:text-xs text-gray-500 mt-2 font-medium md:hidden">üëÜ ‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏±‡∏ô</p>
            </div>

            <!-- Timeline Content -->
            <div id="timeline-container" class="space-y-4 min-h-[400px] mt-4">
                <!-- Content injected by JS -->
            </div>
        </section>

    </main>

    <!-- BACK TO TOP BUTTON -->
    <button onclick="scrollToTop()" class="fixed bottom-6 right-6 z-50 group transition-all duration-300 hover:-translate-y-2">
        <div class="relative">
            <div class="w-16 h-16 bg-buzz-green rounded-full border-4 border-white shadow-xl flex items-center justify-center relative overflow-hidden">
                <div class="absolute inset-0 bg-green-400 opacity-20 rounded-full animate-pulse"></div>
                <span class="text-3xl relative z-10 transform -rotate-45 group-hover:translate-x-1 group-hover:-translate-y-1 transition-transform">üöÄ</span>
            </div>
            <div class="absolute -bottom-1 -right-1 bg-buzz-purple text-white text-[10px] font-bold px-2 py-1 rounded-full border-2 border-white shadow-sm font-sans">TOP</div>
        </div>
    </button>

    <!-- MUSIC CONTROL BUTTON (FIXED LEFT BOTTOM) -->
    <button id="music-btn" onclick="toggleMusic()" class="fixed bottom-6 left-6 z-50 bg-toy-red text-white p-2 rounded-full shadow-2xl border-4 border-white flex items-center gap-2 pr-4 transition-all duration-300 hover:scale-105 music-pulse">
        <div class="bg-white text-toy-red rounded-full w-10 h-10 flex items-center justify-center text-xl animate-spin-slow">üéµ</div>
        <div class="text-left">
            <span class="block text-[10px] font-bold opacity-80 uppercase">Music</span>
            <span id="music-status" class="block text-xs font-black">OFF</span>
        </div>
    </button>

    <!-- YOUTUBE PLAYER (HIDDEN) -->
    <div id="player" class="hidden"></div>

    <!-- JavaScript Logic -->
    <script>
        // --- YOUTUBE API SETUP ---
        var player;
        var isPlaying = false;
        
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                height: '0',
                width: '0',
                videoId: '1MPZRcyTrcU',
                playerVars: {
                    'playsinline': 1,
                    'loop': 1,
                    'playlist': '1MPZRcyTrcU' 
                },
                events: {
                    'onReady': onPlayerReady
                }
            });
        }

        function onPlayerReady(event) { }

        function toggleMusic() {
            const statusText = document.getElementById('music-status');
            const btn = document.getElementById('music-btn');
            
            if (isPlaying) {
                player.pauseVideo();
                statusText.innerText = "OFF";
                btn.classList.remove('music-pulse');
                btn.querySelector('.bg-white').style.animation = 'none';
                isPlaying = false;
            } else {
                player.playVideo();
                statusText.innerText = "ON";
                btn.classList.add('music-pulse');
                btn.querySelector('.bg-white').style.animation = 'spin 3s linear infinite';
                isPlaying = true;
            }
        }

        // Load YouTube IFrame API asynchronously
        var tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);


        // --- DATA STORE ---
        const tripData = {
            day1: [
                { time: "05.00 A.M.", icon: "üöó", transport: "Car", title: "Suvarnabhumi Airport", desc: "TG632 (BKK 08:15 - TPE 12:45)", map: "" },
                { time: "12.45 P.M.", icon: "üõ¨", transport: "Airport", title: "Taoyuan Int. Airport", desc: "Landing at Taipei", map: "" },
                { time: "14.00 P.M.", icon: "üöê", transport: "Van", title: "Airport Pickup", desc: "Ref ID: RJA602339", map: "" },
                { time: "15.00 P.M.", icon: "üè®", transport: "Check-in", title: "Hotel PaPa Whale", desc: "Check-in 15:00", map: "https://maps.app.goo.gl/dokMWcTwL7uofUtD8" },
                { time: "15.30 P.M.", icon: "üôè", transport: "Walk", title: "Xia Hai City God Temple", desc: "‡πÑ‡∏´‡∏ß‡πâ‡∏û‡∏£‡∏∞‡∏Ç‡∏≠‡∏û‡∏£ by ‡∏û‡∏µ‡πà‡∏´‡∏ô‡∏π‡πÅ‡∏´‡∏°‡πà‡∏°", map: "https://maps.app.goo.gl/i7dDYSboadyL394A6" },
                { time: "16.30 P.M.", icon: "üèÆ", transport: "Walk", title: "Dihua Street", desc: "‡∏ñ‡∏ô‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏î‡∏¥‡∏ô‡∏™‡∏≤‡∏¢‡∏≠‡∏≤‡∏£‡πå‡∏ï", map: "" },
                { 
                    time: "18.00 P.M.", 
                    icon: "‚ú®", 
                    transport: "Walk", 
                    title: "Free Time: ‡∏ï‡∏≤‡∏°‡∏≠‡∏±‡∏ò‡∏¢‡∏≤‡∏®‡∏±‡∏¢", 
                    desc: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏¥‡∏•‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡πÉ‡∏à‡∏ä‡∏≠‡∏ö (3 ‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà):", 
                    sub_places: [
                        { name: "‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏•‡πà‡∏ô Ximending", link: "https://maps.app.goo.gl/3QTaFxogtL55bh149" },
                        { name: "‡∏£‡πâ‡∏≤‡∏ô‡∏ô‡∏±‡πà‡∏á‡∏ä‡∏¥‡∏•‡∏¢‡πà‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å", link: "https://maps.app.goo.gl/PUC2dNFWbw8RpPTU8" },
                        { name: "‡∏£‡πâ‡∏≤‡∏ô Ê≥∞Ë≤ì ‡πÑ‡∏ó‡∏¢‡πÄ‡∏°‡∏≤", link: "https://maps.app.goo.gl/TZyu53pG4dKWhrWX8" }
                    ]
                },
                { time: "22.00 P.M.", icon: "üõå", transport: "Walk", title: "Back to Hotel", desc: "‡∏Å‡∏•‡∏±‡∏ö‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô Hotel PaPa Whale", map: "https://maps.app.goo.gl/dokMWcTwL7uofUtD8" }
            ],
            day2: [
                { time: "09.00 A.M.", icon: "üöê", transport: "Van", title: "Pick up @ Hotel", desc: "‡∏Ñ‡∏ô‡∏Ç‡∏±‡∏ö‡∏°‡∏≤‡∏£‡∏±‡∏ö‡∏ó‡∏µ‡πà Hotel PaPa Whale ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏ô‡∏≠‡∏Å‡πÄ‡∏°‡∏∑‡∏≠‡∏á", map: "" },
                { time: "10.00 A.M.", icon: "üèùÔ∏è", transport: "Walk", title: "Heping Island", desc: "‡∏ñ‡∏∂‡∏á Heping Island ‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏•‡πà‡∏ô‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 20-30 ‡∏ô‡∏≤‡∏ó‡∏µ", map: "" },
                { time: "11.00 A.M.", icon: "‚òï", transport: "Van", title: "Zhengbin Port Color Houses", desc: "‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà‡∏ä‡∏±‡πâ‡∏ô 2 ‡∏ß‡∏¥‡∏ß‡∏ó‡πà‡∏≤‡πÄ‡∏£‡∏∑‡∏≠‡∏™‡∏µ‡∏•‡∏π‡∏Å‡∏Å‡∏ß‡∏≤‡∏î", map: "https://maps.app.goo.gl/irWtkbWzjDbw47LY6" },
                { time: "12.00 P.M.", icon: "üçú", transport: "Walk", title: "The fishery (Ramen)", desc: "‡∏£‡πâ‡∏≤‡∏ô‡∏£‡∏≤‡πÄ‡∏°‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏ô‡πÑ‡∏ó‡∏¢‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥", map: "https://maps.app.goo.gl/A7qt2fsqho4JKX7C7" },
                { time: "13.00 P.M.", icon: "üåä", transport: "Walk", title: "Ocean Teatime", desc: "‡∏Ñ‡∏≤‡πÄ‡∏ü‡πà‡∏£‡∏¥‡∏°‡∏ó‡∏∞‡πÄ‡∏• ‡∏°‡∏∏‡∏°‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡∏™‡∏ß‡∏¢‡πÜ", map: "https://maps.app.goo.gl/jTpojJEGkE87CB7q7" },
                { time: "14.30 P.M.", icon: "üö≤", transport: "Van/Bike", title: "Shen'ao Rail Bike", desc: "‡∏Ç‡∏µ‡πà‡πÄ‡∏£‡∏•‡πÑ‡∏ö‡∏Ñ‡πå‡∏à‡∏≤‡∏Å Zhengbin Port > Shen'ao", map: "" },
                { time: "16.00 P.M.", icon: "üèÆ", transport: "Van", title: "Jiufen Old Street", desc: "‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏à‡∏¥‡πà‡∏ß‡πÄ‡∏ü‡∏¥‡πà‡∏ô (16.00 - 18.00 ‡∏ô.)", map: "" },
                { time: "19.00 P.M.", icon: "üè®", transport: "Van", title: "Back to Hotel", desc: "‡∏Å‡∏•‡∏±‡∏ö‡∏ñ‡∏∂‡∏á‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å Hotel PaPa Whale", map: "" },
                {
                    time: "20.00 P.M.",
                    icon: "üçª",
                    transport: "Walk",
                    title: "Free Time: ‡∏ï‡∏≤‡∏°‡∏≠‡∏±‡∏ò‡∏¢‡∏≤‡∏®‡∏±‡∏¢",
                    desc: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡∏ï‡∏≤‡∏°‡πÉ‡∏à‡∏ä‡∏≠‡∏ö (2 ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å):",
                    sub_places: [
                        { name: "Buffet Shabu Shabu", link: "" },
                        { name: "Taiwan Craft Beer & The 58 Bar", link: "https://maps.app.goo.gl/xbngzFALEvf9Ht28A" }
                    ]
                },
                { time: "Night", icon: "üõå", transport: "Walk", title: "Back to Hotel", desc: "‡∏Å‡∏•‡∏±‡∏ö‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô", map: "" }
            ],
            day3: [
                { time: "09.00 A.M.", icon: "üìÖ", transport: "TBD", title: "Day 3: Mission", desc: "(‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏ö‡∏±‡∏ç‡∏ä‡∏≤‡∏Å‡∏≤‡∏£)", map: "" },
                { time: "Lunch", icon: "üêü", transport: "TBD", title: "Taipei Fish Market?", desc: "(‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏ã‡∏≤‡∏ã‡∏¥‡∏°‡∏¥‡∏¢‡∏∑‡∏ô‡∏Å‡∏¥‡∏ô)", map: "" },
                { time: "Afternoon", icon: "üèÆ", transport: "TBD", title: "Jiufen / Shifen?", desc: "(‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏´‡∏°‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡πÇ‡∏Ñ‡∏°‡πÅ‡∏î‡∏á)", map: "" }
            ],
            day4: [
                { time: "Morning", icon: "‚ô®Ô∏è", transport: "TBD", title: "Day 4: Mission", desc: "Beitou Hot Spring?", map: "" },
                { time: "Evening", icon: "üçó", transport: "TBD", title: "Shilin Night Market", desc: "‡∏ï‡∏•‡∏≤‡∏î‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏´‡∏ç‡πà‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î", map: "" }
            ],
            day5: [
                { time: "Morning", icon: "üéÅ", transport: "Walk", title: "Last Minute Shop", desc: "Carrefour / Ximending", map: "" },
                { time: "12.00 P.M.", icon: "üöê", transport: "Van", title: "To Airport", desc: "Go to Taoyuan (TPE)", map: "" },
                { time: "Flight", icon: "‚úàÔ∏è", transport: "Flight", title: "Back to Home", desc: "‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏≠‡πâ‡∏≠‡∏°‡∏≠‡∏Å‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß", map: "" }
            ]
        };

        // --- UTILITY LOGIC ---
        async function fetchWeather() {
            try {
                const res = await fetch('https://api.open-meteo.com/v1/forecast?latitude=25.0330&longitude=121.5654&current_weather=true&timezone=Asia%2FTaipei');
                const data = await res.json();
                const temp = Math.round(data.current_weather.temperature);
                const code = data.current_weather.weathercode;
                document.getElementById('weather-temp').innerText = `${temp}¬∞C`;
                let icon = "‚òÅÔ∏è";
                if (code === 0) icon = "‚òÄÔ∏è";
                else if (code >= 1 && code <= 3) icon = "‚õÖ";
                else if (code >= 51) icon = "üåßÔ∏è";
                document.getElementById('weather-icon').innerText = icon;
            } catch (err) { }
        }

        async function calculate() {
            const currency_one = 'TWD';
            const currency_two = 'THB';
            try {
                // Using approx rate since API key might be needed for some services, falling back to static estimate if fail
                // Real implementation would use a valid key or backend.
                // 1 TWD ~= 1.12 THB (Approx)
                const amountOne = document.getElementById('amount-one').value;
                // Simple fetch from open API
                const res = await fetch(`https://open.er-api.com/v6/latest/TWD`);
                const data = await res.json();
                const rate = data.rates.THB;
                document.getElementById('amount-two').value = (amountOne * rate).toFixed(2);
            } catch (err) { 
                // Fallback rate
                const amountOne = document.getElementById('amount-one').value;
                document.getElementById('amount-two').value = (amountOne * 1.12).toFixed(2);
            }
        }

        fetchWeather();
        calculate();

        // --- COUNTDOWN & ITINERARY LOGIC ---
        function updateCountdown() {
            const targetDate = new Date("2026-02-27T05:00:00").getTime();
            const now = new Date().getTime();
            const timeLeft = targetDate - now;
            if (timeLeft < 0) {
                document.getElementById("countdown-timer").innerHTML = "<div class='text-2xl font-bold text-toy-red'>üéâ MISSION STARTED! üéâ</div>";
                return;
            }
            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            document.getElementById("cd-days").innerText = days.toString().padStart(2, '0');
            document.getElementById("cd-hours").innerText = hours.toString().padStart(2, '0');
            document.getElementById("cd-minutes").innerText = minutes.toString().padStart(2, '0');
            document.getElementById("cd-seconds").innerText = seconds.toString().padStart(2, '0');
        }
        setInterval(updateCountdown, 1000);
        updateCountdown();

        function switchDay(day) {
            [1, 2, 3, 4, 5].forEach(d => {
                const btn = document.getElementById(`btn-day${d}`);
                if (d === day) {
                    btn.className = "tab-btn tab-active px-2 py-3 md:px-6 md:py-4 rounded-xl text-base md:text-xl font-bold shadow-lg transform scale-105";
                } else {
                    btn.className = "tab-btn tab-inactive px-2 py-3 md:px-6 md:py-4 rounded-xl text-base md:text-xl font-bold opacity-80 hover:opacity-100";
                }
            });
            renderTimeline(day);
        }

        function renderTimeline(day) {
            const container = document.getElementById('timeline-container');
            const key = `day${day}`;
            const data = tripData[key];
            container.innerHTML = '';
            if (!data || data.length === 0) {
                container.innerHTML = `<div class="text-center text-gray-500 py-10 font-cartoon text-xl">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏ô‡∏µ‡πâ üì¶</div>`;
                return;
            }
            data.forEach((item, index) => {
                const colors = ['border-toy-blue', 'border-toy-yellow', 'border-toy-red', 'border-buzz-green', 'border-buzz-purple'];
                const borderColor = colors[index % colors.length];
                let contentHtml = `<p class="text-sm text-gray-600 font-medium leading-relaxed">${item.desc}</p>`;
                if (item.sub_places) {
                    contentHtml += `<div class="mt-3 space-y-2">`;
                    item.sub_places.forEach(place => {
                        let linkHtml = '';
                        if (place.link) {
                            linkHtml = `<a href="${place.link}" target="_blank" class="block bg-gray-50 hover:bg-sky-50 border border-gray-200 hover:border-sky-200 rounded-lg p-2 transition flex items-center gap-2 group/link"><span class="text-lg">üìç</span><span class="text-xs md:text-sm text-gray-700 font-bold group-hover/link:text-toy-blue">${place.name}</span></a>`;
                        } else {
                            linkHtml = `<div class="block bg-gray-50 border border-gray-200 rounded-lg p-2 flex items-center gap-2"><span class="text-lg">üçΩÔ∏è</span><span class="text-xs md:text-sm text-gray-700 font-bold">${place.name}</span></div>`;
                        }
                        contentHtml += linkHtml;
                    });
                    contentHtml += `</div>`;
                } else if (item.map) {
                    contentHtml += `<a href="${item.map}" target="_blank" class="mt-3 inline-flex items-center gap-1 bg-sky-100 text-toy-blue px-4 py-2 rounded-full text-xs font-bold hover:bg-sky-200 transition border-2 border-sky-200">üìç Google Map</a>`;
                }
                const html = `<div class="toy-card bg-white p-5 rounded-2xl border-l-[8px] ${borderColor} flex gap-4 relative overflow-hidden group"><div class="absolute top-0 right-0 w-20 h-20 bg-gradient-to-bl from-gray-100 to-transparent -mr-8 -mt-8 rounded-full transition-all group-hover:scale-150 group-hover:bg-gray-50"></div><div class="flex flex-col items-center min-w-[4rem] z-10"><span class="text-xs font-bold text-gray-500 bg-gray-100 px-2 py-1 rounded-md mb-2 border border-gray-200 text-center">${item.time}</span><div class="text-4xl filter drop-shadow-sm transform group-hover:scale-110 group-hover:rotate-6 transition-transform duration-300">${item.icon}</div></div><div class="flex-1 z-10"><h3 class="font-bold text-toy-blue text-lg leading-tight font-cartoon mb-1">${item.title}</h3><div class="flex flex-wrap gap-2 my-1"><span class="text-[10px] bg-yellow-50 text-yellow-800 px-2 py-0.5 rounded-md font-bold uppercase tracking-wider border border-yellow-200">${item.transport}</span></div>${contentHtml}</div></div>`;
                container.insertAdjacentHTML('beforeend', html);
            });
        }

        function scrollToSection(id) { document.getElementById(id).scrollIntoView({ behavior: 'smooth' }); }
        function scrollToTop() { window.scrollTo({ top: 0, behavior: 'smooth' }); }
        document.addEventListener('DOMContentLoaded', () => { switchDay(1); });
    </script>
</body>
</html>